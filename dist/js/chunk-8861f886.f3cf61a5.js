(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8861f886"],{2100:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",[n("v-col",[n("v-card",[n("v-card-title",[n("div",{staticStyle:{width:"100%"}},[n("v-toolbar",{attrs:{flat:"",color:"white"}},[n("v-toolbar-title",[e._v("Control de producción lechera")]),n("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),n("v-spacer"),[n("v-btn",{staticClass:"mb-2 mr-2",attrs:{color:"primary",dark:""},on:{click:function(t){return e.$router.push({name:"ProduccionLecheraCreateFast"})}}},[e._v("Cargar Rapida")])],[n("v-btn",{staticClass:"mb-2",attrs:{color:"primary",dark:""},on:{click:function(t){return e.$router.push({name:"ProduccionLecheraCreate"})}}},[e._v("Nuevo registro")])]],2)],1),n("div",{staticStyle:{width:"100%"}},[n("v-text-field",{attrs:{"append-icon":"search",label:"Buscar","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),n("div",{staticStyle:{width:"100%"}},[n("v-select",{attrs:{items:e.semanas,label:"Semana","item-text":"text","return-object":"",hint:"Selecciona una semana","persistent-hint":""},on:{change:function(t){return e.cargarProduccion(t)}},model:{value:e.semanaSelected,callback:function(t){e.semanaSelected=t},expression:"semanaSelected"}})],1)]),n("v-data-table",{attrs:{headers:e.headers,items:e.produccionLecheraFiltrada,search:e.search},scopedSlots:e._u([{key:"header",fn:function(){return[n("thead",[n("tr",[n("th"),n("th"),n("th",{staticClass:"text-center",staticStyle:{border:"1px solid #dbdbdb"},attrs:{colspan:"2"}},[e._v("Lunes")]),n("th",{staticClass:"text-center",staticStyle:{border:"1px solid #dbdbdb"},attrs:{colspan:"2"}},[e._v("Martes")]),n("th",{staticClass:"text-center",staticStyle:{border:"1px solid #dbdbdb"},attrs:{colspan:"2"}},[e._v("Miercoles")]),n("th",{staticClass:"text-center",staticStyle:{border:"1px solid #dbdbdb"},attrs:{colspan:"2"}},[e._v("Jueves")]),n("th",{staticClass:"text-center",staticStyle:{border:"1px solid #dbdbdb"},attrs:{colspan:"2"}},[e._v("Viernes")]),n("th",{staticClass:"text-center",staticStyle:{border:"1px solid #dbdbdb"},attrs:{colspan:"2"}},[e._v("Sabado")]),n("th",{staticClass:"text-center",staticStyle:{border:"1px solid #dbdbdb"},attrs:{colspan:"2"}},[e._v("Domingo")])])])]},proxy:!0},e.diaPermitido(6)?{key:"item.dm",fn:function(t){return[n("v-edit-dialog",{attrs:{"return-value":t.item.dm},on:{"update:returnValue":function(n){return e.$set(t.item,"dm",n)},"update:return-value":function(n){return e.$set(t.item,"dm",n)},save:function(n){return e.save(t)},cancel:e.cancel,open:function(t){return e.open("dm")},close:e.close},scopedSlots:e._u([{key:"input",fn:function(){return[n("v-text-field",{attrs:{rules:[e.max3chars],label:"Litros de leche","single-line":"",counter:""},model:{value:t.item.dm,callback:function(n){e.$set(t.item,"dm",n)},expression:"props.item.dm"}})]},proxy:!0}],null,!0)},[e._v(" "+e._s(t.item.dm)+" ")])]}}:null,e.diaPermitido(6)?{key:"item.dt",fn:function(t){return[n("v-edit-dialog",{attrs:{"return-value":t.item.dt},on:{"update:returnValue":function(n){return e.$set(t.item,"dt",n)},"update:return-value":function(n){return e.$set(t.item,"dt",n)},save:function(n){return e.save(t)},cancel:e.cancel,open:function(t){return e.open("dt")},close:e.close},scopedSlots:e._u([{key:"input",fn:function(){return[n("v-text-field",{attrs:{rules:[e.max3chars],label:"Litros de leche","single-line":"",counter:""},model:{value:t.item.dt,callback:function(n){e.$set(t.item,"dt",n)},expression:"props.item.dt"}})]},proxy:!0}],null,!0)},[e._v(" "+e._s(t.item.dt)+" ")])]}}:null,e.diaPermitido(0)?{key:"item.lm",fn:function(t){return[n("v-edit-dialog",{attrs:{"return-value":t.item.lm},on:{"update:returnValue":function(n){return e.$set(t.item,"lm",n)},"update:return-value":function(n){return e.$set(t.item,"lm",n)},save:function(n){return e.save(t)},cancel:e.cancel,open:function(t){return e.open("lm")},close:e.close},scopedSlots:e._u([{key:"input",fn:function(){return[n("v-text-field",{attrs:{rules:[e.max3chars],label:"Litros de leche","single-line":"",counter:""},model:{value:t.item.lm,callback:function(n){e.$set(t.item,"lm",n)},expression:"props.item.lm"}})]},proxy:!0}],null,!0)},[e._v(" "+e._s(t.item.lm)+" ")])]}}:null,e.diaPermitido(0)?{key:"item.lt",fn:function(t){return[n("v-edit-dialog",{attrs:{"return-value":t.item.lt},on:{"update:returnValue":function(n){return e.$set(t.item,"lt",n)},"update:return-value":function(n){return e.$set(t.item,"lt",n)},save:function(n){return e.save(t)},cancel:e.cancel,open:function(t){return e.open("lt")},close:e.close},scopedSlots:e._u([{key:"input",fn:function(){return[n("v-text-field",{attrs:{rules:[e.max3chars],label:"Litros de leche","single-line":"",counter:""},model:{value:t.item.lt,callback:function(n){e.$set(t.item,"lt",n)},expression:"props.item.lt"}})]},proxy:!0}],null,!0)},[e._v(" "+e._s(t.item.lt)+" ")])]}}:null,e.diaPermitido(1)?{key:"item.mm",fn:function(t){return[n("v-edit-dialog",{attrs:{"return-value":t.item.mm},on:{"update:returnValue":function(n){return e.$set(t.item,"mm",n)},"update:return-value":function(n){return e.$set(t.item,"mm",n)},save:function(n){return e.save(t)},cancel:e.cancel,open:function(t){return e.open("mm")},close:e.close},scopedSlots:e._u([{key:"input",fn:function(){return[n("v-text-field",{attrs:{rules:[e.max3chars],label:"Litros de leche","single-line":"",counter:""},model:{value:t.item.mm,callback:function(n){e.$set(t.item,"mm",n)},expression:"props.item.mm"}})]},proxy:!0}],null,!0)},[e._v(" "+e._s(t.item.mm)+" ")])]}}:null,e.diaPermitido(1)?{key:"item.mt",fn:function(t){return[n("v-edit-dialog",{attrs:{"return-value":t.item.mt},on:{"update:returnValue":function(n){return e.$set(t.item,"mt",n)},"update:return-value":function(n){return e.$set(t.item,"mt",n)},save:function(n){return e.save(t)},cancel:e.cancel,open:function(t){return e.open("mt")},close:e.close},scopedSlots:e._u([{key:"input",fn:function(){return[n("v-text-field",{attrs:{rules:[e.max3chars],label:"Litros de leche","single-line":"",counter:""},model:{value:t.item.mt,callback:function(n){e.$set(t.item,"mt",n)},expression:"props.item.mt"}})]},proxy:!0}],null,!0)},[e._v(" "+e._s(t.item.mt)+" ")])]}}:null,e.diaPermitido(2)?{key:"item.mim",fn:function(t){return[n("v-edit-dialog",{attrs:{"return-value":t.item.mim},on:{"update:returnValue":function(n){return e.$set(t.item,"mim",n)},"update:return-value":function(n){return e.$set(t.item,"mim",n)},save:function(n){return e.save(t)},cancel:e.cancel,open:function(t){return e.open("mim")},close:e.close},scopedSlots:e._u([{key:"input",fn:function(){return[n("v-text-field",{attrs:{rules:[e.max3chars],label:"Litros de leche","single-line":"",counter:""},model:{value:t.item.mim,callback:function(n){e.$set(t.item,"mim",n)},expression:"props.item.mim"}})]},proxy:!0}],null,!0)},[e._v(" "+e._s(t.item.mim)+" ")])]}}:null,e.diaPermitido(2)?{key:"item.mit",fn:function(t){return[n("v-edit-dialog",{attrs:{"return-value":t.item.mit},on:{"update:returnValue":function(n){return e.$set(t.item,"mit",n)},"update:return-value":function(n){return e.$set(t.item,"mit",n)},save:function(n){return e.save(t)},cancel:e.cancel,open:function(t){return e.open("mit")},close:e.close},scopedSlots:e._u([{key:"input",fn:function(){return[n("v-text-field",{attrs:{rules:[e.max3chars],label:"Litros de leche","single-line":"",counter:""},model:{value:t.item.mit,callback:function(n){e.$set(t.item,"mit",n)},expression:"props.item.mit"}})]},proxy:!0}],null,!0)},[e._v(" "+e._s(t.item.mit)+" ")])]}}:null,e.diaPermitido(3)?{key:"item.jm",fn:function(t){return[n("v-edit-dialog",{attrs:{"return-value":t.item.jm},on:{"update:returnValue":function(n){return e.$set(t.item,"jm",n)},"update:return-value":function(n){return e.$set(t.item,"jm",n)},save:function(n){return e.save(t)},cancel:e.cancel,open:function(t){return e.open("jm")},close:e.close},scopedSlots:e._u([{key:"input",fn:function(){return[n("v-text-field",{attrs:{rules:[e.max3chars],label:"Litros de leche","single-line":"",counter:""},model:{value:t.item.jm,callback:function(n){e.$set(t.item,"jm",n)},expression:"props.item.jm"}})]},proxy:!0}],null,!0)},[e._v(" "+e._s(t.item.jm)+" ")])]}}:null,e.diaPermitido(3)?{key:"item.jt",fn:function(t){return[n("v-edit-dialog",{attrs:{"return-value":t.item.jt},on:{"update:returnValue":function(n){return e.$set(t.item,"jt",n)},"update:return-value":function(n){return e.$set(t.item,"jt",n)},save:function(n){return e.save(t)},cancel:e.cancel,open:function(t){return e.open("jt")},close:e.close},scopedSlots:e._u([{key:"input",fn:function(){return[n("v-text-field",{attrs:{rules:[e.max3chars],label:"Litros de leche","single-line":"",counter:""},model:{value:t.item.jt,callback:function(n){e.$set(t.item,"jt",n)},expression:"props.item.jt"}})]},proxy:!0}],null,!0)},[e._v(" "+e._s(t.item.jt)+" ")])]}}:null,e.diaPermitido(4)?{key:"item.vm",fn:function(t){return[n("v-edit-dialog",{attrs:{"return-value":t.item.vm},on:{"update:returnValue":function(n){return e.$set(t.item,"vm",n)},"update:return-value":function(n){return e.$set(t.item,"vm",n)},save:function(n){return e.save(t)},cancel:e.cancel,open:function(t){return e.open("vm")},close:e.close},scopedSlots:e._u([{key:"input",fn:function(){return[n("v-text-field",{attrs:{rules:[e.max3chars],label:"Litros de leche","single-line":"",counter:""},model:{value:t.item.vm,callback:function(n){e.$set(t.item,"vm",n)},expression:"props.item.vm"}})]},proxy:!0}],null,!0)},[n("span",[e._v(e._s(t.item.vm))])])]}}:null,e.diaPermitido(4)?{key:"item.vt",fn:function(t){return[n("v-edit-dialog",{attrs:{"return-value":t.item.vt},on:{"update:returnValue":function(n){return e.$set(t.item,"vt",n)},"update:return-value":function(n){return e.$set(t.item,"vt",n)},save:function(n){return e.save(t)},cancel:e.cancel,open:function(t){return e.open("vt")},close:e.close},scopedSlots:e._u([{key:"input",fn:function(){return[n("v-text-field",{attrs:{rules:[e.max3chars],label:"Litros de leche","single-line":"",counter:""},model:{value:t.item.vt,callback:function(n){e.$set(t.item,"vt",n)},expression:"props.item.vt"}})]},proxy:!0}],null,!0)},[e._v(" "+e._s(t.item.vt)+" ")])]}}:null,e.diaPermitido(5)?{key:"item.sm",fn:function(t){return[n("v-edit-dialog",{attrs:{"return-value":t.item.sm},on:{"update:returnValue":function(n){return e.$set(t.item,"sm",n)},"update:return-value":function(n){return e.$set(t.item,"sm",n)},save:function(n){return e.save(t)},cancel:e.cancel,open:function(t){return e.open("sm")},close:e.close},scopedSlots:e._u([{key:"input",fn:function(){return[n("v-text-field",{attrs:{rules:[e.max3chars],label:"Litros de leche","single-line":"",counter:""},model:{value:t.item.sm,callback:function(n){e.$set(t.item,"sm",n)},expression:"props.item.sm"}})]},proxy:!0}],null,!0)},[e._v(" "+e._s(t.item.sm)+" ")])]}}:null,e.diaPermitido(5)?{key:"item.st",fn:function(t){return[n("v-edit-dialog",{attrs:{"return-value":t.item.st},on:{"update:returnValue":function(n){return e.$set(t.item,"st",n)},"update:return-value":function(n){return e.$set(t.item,"st",n)},save:function(n){return e.save(t)},cancel:e.cancel,open:function(t){return e.open("st")},close:e.close},scopedSlots:e._u([{key:"input",fn:function(){return[n("v-text-field",{attrs:{rules:[e.max3chars],label:"Litros de leche","single-line":"",counter:""},model:{value:t.item.st,callback:function(n){e.$set(t.item,"st",n)},expression:"props.item.st"}})]},proxy:!0}],null,!0)},[e._v(" "+e._s(t.item.st)+" ")])]}}:null],null,!0)})],1)],1),n("modalconfirm",{ref:"modalConfirm"}),n("v-snackbar",{attrs:{timeout:3e3,color:e.snackColor},scopedSlots:e._u([{key:"action",fn:function(t){var i=t.attrs;return[n("v-btn",e._b({attrs:{text:""},on:{click:function(t){e.snack=!1}}},"v-btn",i,!1),[e._v("Close")])]}}]),model:{value:e.snack,callback:function(t){e.snack=t},expression:"snack"}},[e._v(" "+e._s(e.snackText)+" ")])],1)},a=[],r=(n("99af"),n("4de4"),n("5530")),o=n("a7da"),c=n("2f62"),l=n("b2d2"),s={components:{modalconfirm:o["a"]},name:"produccion-lechera-list",data:function(){return{produccionService:null,snack:!1,snackColor:"",snackText:"",max3chars:function(e){return e.length<=3||"Muy largo!"},semanaSelected:null,semanas:[],search:"",headers:[{text:"Nro",value:"identificacion"},{text:"Nombre",value:"nombre"},{text:"M",value:"lm"},{text:"T",value:"lt"},{text:"M",value:"mm"},{text:"T",value:"mt"},{text:"M",value:"mim"},{text:"T",value:"mit"},{text:"M",value:"jm"},{text:"T",value:"jt"},{text:"M",value:"vm"},{text:"T",value:"vt"},{text:"M",value:"sm"},{text:"T",value:"st"},{text:"M",value:"dm"},{text:"T",value:"dt"}],dataInitial:{animal_id:0,identificacion:"",nombre:"",lm:0,lt:0,mm:0,mt:0,mim:0,mit:0,jm:0,jt:0,vm:0,vt:0,sm:0,st:0,dm:0,dt:0},produccionLecheraFiltrada:[]}},created:function(){this.produccionService=new l["a"]},mounted:function(){this.cargarSemanas()},methods:Object(r["a"])(Object(r["a"])({},Object(c["c"])(["deleteProductionData"])),{},{cargarSemanas:function(){for(var e=this.$moment().week(),t=1;t<=e;t++){var n=this.$moment().week(t),i=n.startOf("week").format("DD/MM/YYYY"),a=n.endOf("week").format("DD/MM/YYYY"),r={text:"Del ".concat(i," al ").concat(a),semana:t,inicio:n.startOf("week").format("DD/MM/YYYY"),fin:n.endOf("week").format("DD/MM/YYYY")};this.semanas.push(r),this.semanaSelected=r}this.cargarProduccion()},cargarProduccion:function(){var e=this,t={finca_id:this.getFinca.id,usuario_id:this.getUsuario.id,token:this.getToken,semana_del_year:this.semanaSelected.semana};this.produccionService.getProduccionPorSemana(t).then((function(t){for(var n=[],i=function(i){var a=t.data.data[i];if(0==n.length){var o=Object(r["a"])({},e.dataInitial);o.animal_id=a.animal_id,o.identificacion=a.identificacion,o.nombre=a.nombre,n.push(o)}else{var c=n.filter((function(e){return e.animal_id==a.animal_id}));if(0==c.length){var l=Object(r["a"])({},e.dataInitial);l.animal_id=a.animal_id,l.identificacion=a.identificacion,l.nombre=a.nombre,n.push(l)}}},a=0;a<t.data.data.length;a++)i(a);for(var o={0:"l",1:"m",2:"mi",3:"j",4:"v",5:"s",6:"d"},c=function(e){var i=n[e],a=t.data.data.filter((function(e){return e.animal_id==i.animal_id}));if(0!=a.length)for(var r=0;r<a.length;r++){var c=a[r],l=0==c.momento_del_dia?"m":"t";n[e][o[String(c.dia_de_la_semana)]+l]=c.cantidad}},l=0;l<n.length;l++)c(l);e.produccionLecheraFiltrada=n})).catch((function(e){console.log(e)}))},activarEdicion:function(e){console.log(e)},editItem:function(e){console.log("editar",e)},deleteItem:function(e){var t=this,n="Eliminar registro",i="¿Desea eliminar el registro seleccionado?";this.$refs.modalConfirm.open(n,i).then((function(n){n&&(t.deleteProductionData(e),t.productionDataFiltered=t.getProductionData.filter((function(e){return e.week.id==t.weekSelected.id})))}))},save:function(e){var t=this,n={id:0,animal_id:e.item.animal_id,fecha:this.$moment().format("YYYY-MM-DD"),hora:"M"==e.header.text?"05:00":"17:00",cantidad:e.value,semana_del_year:this.$moment().week(),dia_de_la_semana:this.$moment().weekday(),momento_del_dia:"M"==e.header.text?0:1,registro_manual:1,observaciones:"",usuario_id:this.getUsuario.id,finca_id:this.getFinca.id};this.produccionService.createProduccion(n).then((function(e){console.log(e),t.snack=!0,t.snackColor="success",t.snackText="Data guardada"})).catch((function(e){console.log(e),t.snack=!0,t.snackColor="error",t.snackText="Error al guardar dato"}))},cancel:function(){this.snack=!0,this.snackColor="error",this.snackText="Acción cancelada"},open:function(e){console.log(e)},close:function(){},diaPermitido:function(e){var t=!1;if(this.semanaSelected){var n=this.$moment(this.semanaSelected.inicio,"DD/MM/YYYY"),i=this.$moment(this.semanaSelected.fin,"DD/MM/YYYY"),a=this.$moment();a>=n&&a<=i&&e==this.$moment().weekday()&&(t=!0)}return t}}),computed:Object(r["a"])({},Object(c["b"])(["getFinca","getUsuario","getToken"])),watch:{semanaSelected:function(e){e?this.cargarProduccion():this.produccionLecheraFiltrada=[]}}},u=s,d=(n("4dbd"),n("2877")),m=n("6544"),v=n.n(m),f=n("8336"),p=n("b0af"),h=n("99d9"),x=n("62ad"),b=n("8fea"),k=n("ce7e"),_=(n("c79c"),n("e4d3")),g=n("7560"),y=n("80d2"),$=n("afdd"),S=n("326d"),C=n("58df"),j=Object(C["a"])(_["a"],g["a"]).extend({name:"v-edit-dialog",props:{cancelText:{default:"Cancel"},large:Boolean,eager:Boolean,persistent:Boolean,saveText:{default:"Save"},transition:{type:String,default:"slide-x-reverse-transition"}},data:function(){return{isActive:!1}},watch:{isActive:function(e){e?(this.$emit("open"),setTimeout(this.focus,50)):this.$emit("close")}},methods:{cancel:function(){this.isActive=!1,this.$emit("cancel")},focus:function(){var e=this.$refs.content.querySelector("input");e&&e.focus()},genButton:function(e,t){return this.$createElement($["a"],{props:{text:!0,color:"primary",light:!0},on:{click:e}},t)},genActions:function(){var e=this;return this.$createElement("div",{class:"v-small-dialog__actions"},[this.genButton(this.cancel,this.cancelText),this.genButton((function(){e.save(e.returnValue),e.$emit("save")}),this.saveText)])},genContent:function(){var e=this;return this.$createElement("div",{staticClass:"v-small-dialog__content",on:{keydown:function(t){var n=e.$refs.content.querySelector("input");t.keyCode===y["x"].esc&&e.cancel(),t.keyCode===y["x"].enter&&n&&(e.save(n.value),e.$emit("save"))}},ref:"content"},[this.$slots.input])}},render:function(e){var t=this;return e(S["a"],{staticClass:"v-small-dialog",class:this.themeClasses,props:{contentClass:"v-small-dialog__menu-content",transition:this.transition,origin:"top right",right:!0,value:this.isActive,closeOnClick:!this.persistent,closeOnContentClick:!1,eager:this.eager,light:this.light,dark:this.dark},on:{input:function(e){return t.isActive=e}},scopedSlots:{activator:function(n){var i=n.on;return e("div",{staticClass:"v-small-dialog__activator",on:i},[e("span",{staticClass:"v-small-dialog__activator__content"},t.$slots.default)])}}},[this.genContent(),this.large?this.genActions():null])}}),P=n("0fd9"),V=n("b974"),Y=n("2db4"),w=n("2fa4"),M=n("8654"),D=n("71d9"),T=n("2a7f"),L=Object(d["a"])(u,i,a,!1,null,"655505d9",null);t["default"]=L.exports;v()(L,{VBtn:f["a"],VCard:p["a"],VCardTitle:h["c"],VCol:x["a"],VDataTable:b["a"],VDivider:k["a"],VEditDialog:j,VRow:P["a"],VSelect:V["a"],VSnackbar:Y["a"],VSpacer:w["a"],VTextField:M["a"],VToolbar:D["a"],VToolbarTitle:T["a"]})},"4dbd":function(e,t,n){"use strict";var i=n("e5b4"),a=n.n(i);a.a},b2d2:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("d4ec"),a=n("bee2"),r=n("bc3a"),o=n.n(r),c=function(){function e(){Object(i["a"])(this,e)}return Object(a["a"])(e,[{key:"getProduccionPorFinca",value:function(e){return o.a.post("https://veterinariaapi.herokuapp.com/api/produccion_lechera/finca/",e)}},{key:"getProduccionPorSemana",value:function(e){return o.a.post("https://veterinariaapi.herokuapp.com/api/produccion_lechera/semana/",e)}},{key:"getProduccionPorAnimal",value:function(e){return o.a.post("https://veterinariaapi.herokuapp.com/api/produccion_lechera/animal/",e)}},{key:"createProduccion",value:function(e){return o.a.post("https://veterinariaapi.herokuapp.com/api/produccion_lechera/",e)}},{key:"editAnimal",value:function(e){return o.a.put("https://veterinariaapi.herokuapp.com/api/produccion_lechera/",e)}},{key:"getProduccionById",value:function(e){return o.a.get("https://veterinariaapi.herokuapp.com/api/produccion_lechera/"+e)}},{key:"deleteAnimal",value:function(e){return o.a.delete("https://veterinariaapi.herokuapp.com/api/produccion_lechera/"+e)}}]),e}()},c79c:function(e,t,n){},e5b4:function(e,t,n){}}]);
//# sourceMappingURL=chunk-8861f886.f3cf61a5.js.map