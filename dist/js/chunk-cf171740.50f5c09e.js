(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cf171740"],{"2bb5":function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var a=r("d4ec"),o=r("bee2"),n=r("bc3a"),i=r.n(n),s=function(){function e(){Object(a["a"])(this,e)}return Object(o["a"])(e,[{key:"getAllRoles",value:function(e){return i.a.post("https://veterinariaapi.herokuapp.com/api/roles/all/",e)}},{key:"createRol",value:function(e){return i.a.post("https://veterinariaapi.herokuapp.com/api/roles/create/",e)}},{key:"createRolPermiso",value:function(e){return i.a.post("https://veterinariaapi.herokuapp.com/api/roles/permisos/",e)}},{key:"editRol",value:function(e){return i.a.put("https://veterinariaapi.herokuapp.com/api/roles/",e)}},{key:"getRolById",value:function(e){return i.a.get("https://veterinariaapi.herokuapp.com/api/roles/"+e)}},{key:"deleteRol",value:function(e){return i.a.delete("https://veterinariaapi.herokuapp.com/api/roles/"+e)}},{key:"getAllPermisos",value:function(){return i.a.get("https://veterinariaapi.herokuapp.com/api/permisos/")}}]),e}()},9338:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-row",[r("v-col",{staticClass:"text-h5",attrs:{cols:"12"}},[e._v(" Creaci√≥n de roles "),r("hr")]),r("v-col",{attrs:{cols:"12"}},[r("v-row",{staticClass:"pl-3"},[r("v-col",{attrs:{cols:"12",sm:"3"}},[r("v-text-field",{attrs:{label:"Nombre",hint:"Ingresa el nombre del rol","persistent-hint":""},model:{value:e.rolData.rol,callback:function(t){e.$set(e.rolData,"rol",t)},expression:"rolData.rol"}})],1),r("v-col",{attrs:{cols:"12",sm:"9"}},[r("v-select",{attrs:{multiple:"",chips:"","item-text":"nombre",items:e.permisos,label:"Permisos Asignados",outlined:"","return-object":""},model:{value:e.permisoSelected,callback:function(t){e.permisoSelected=t},expression:"permisoSelected"}})],1)],1)],1),r("v-col",{attrs:{cols:"12",sm:"6",md:"3"}},[r("v-btn",{staticClass:"ml-3",attrs:{color:"primary",dark:""},on:{click:function(t){return e.guardar()}}},[e._v("Guardar")]),r("v-btn",{staticClass:"ml-3",attrs:{color:"error",dark:""},on:{click:function(t){return e.$router.push({name:"RolesList"})}}},[e._v("Cancelar")])],1)],1)},o=[],n=(r("d81d"),r("96cf"),r("1da1")),i=r("5530"),s=r("2f62"),c=r("b132"),l=r("2bb5"),u={mixins:[c["a"]],name:"roles-create",data:function(){return{rolesService:null,type:"create",permisos:[],rolData:{id:0,rol:"",finca_id:null,usuario_id:null},permisoSelected:[]}},created:function(){this.rolesService=new l["a"]},mounted:function(){var e=this;this.recuperarPermisos(),this.$route.params.id?(this.type="edit",this.rolesService.getRolById(this.$route.params.id).then((function(t){e.rolData.id=t.data.data.rol.id,e.rolData.rol=t.data.data.rol.rol,e.rolData.finca_id=t.data.data.rol.finca_id,e.rolData.usuario_id=e.getUsuario.id,e.permisoSelected=t.data.data.permisos})).catch((function(e){console.log(e)}))):(this.rolData.finca_id=this.getFinca.id,this.rolData.usuario_id=this.getUsuario.id)},methods:Object(i["a"])(Object(i["a"])({},Object(s["c"])([])),{},{recuperarPermisos:function(){var e=this;this.rolesService.getAllPermisos().then((function(t){e.permisos=t.data.data})).catch((function(){}))},guardar:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!=e.permisoSelected.length){t.next=4;break}return r={text:"Debe asignarle al menos un permiso al rol",snackbar:!0,color:"warning"},e.$emit("mostrarMensaje",r),t.abrupt("return",!1);case 4:if(r=null,"create"!=e.type){t.next=14;break}return a=null,t.next=9,e.rolesService.createRol(e.rolData).then((function(e){a=e.data.id_creado})).catch((function(e){return console.log(e),!1}));case 9:return o={rol_id:a,permisos_ids:e.permisoSelected.map((function(e){return e.id}))},t.next=12,e.rolesService.createRolPermiso(o).then((function(t){console.log(t),r={text:"Registro guardado exitosamente",snackbar:!0,color:"success"},e.$emit("mostrarMensaje",r),setTimeout((function(){e.$router.push({name:"RolesList"})}),2e3)})).catch((function(){}));case 12:t.next=17;break;case 14:r={text:"Registro editado exitosamente",snackbar:!0,color:"success"},e.$emit("mostrarMensaje",r),setTimeout((function(){e.$router.push({name:"RolesList"})}),2e3);case 17:case"end":return t.stop()}}),t)})))()}}),computed:Object(i["a"])({},Object(s["b"])(["getFinca","getUsuario"]))},d=u,p=r("2877"),m=r("6544"),f=r.n(m),h=r("8336"),v=r("62ad"),b=r("0fd9"),g=r("b974"),k=r("8654"),x=Object(p["a"])(d,a,o,!1,null,"c0d683c0",null);t["default"]=x.exports;f()(x,{VBtn:h["a"],VCol:v["a"],VRow:b["a"],VSelect:g["a"],VTextField:k["a"]})},b132:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));r("7db0"),r("d3b7"),r("25f0");var a=r("07a4"),o={methods:{tienePermiso:function(e){return a["a"].getters.getPermisosDetallados.find((function(t){return t==e}))},colorAleatorio:function(){for(var e=new Array("0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"),t="#",r=0;r<6;r++){var a=e.length-0,o=Math.random()*a;o=Math.floor(o);var n=parseInt(0)+o;t+=e[n]}return t},generarToken:function(){return Math.random().toString(36).substring(2,13)+Math.random().toString(36).substring(2,13)}}}}}]);
//# sourceMappingURL=chunk-cf171740.50f5c09e.js.map