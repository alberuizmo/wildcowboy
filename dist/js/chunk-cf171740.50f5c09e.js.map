{"version":3,"sources":["webpack:///./src/services/roles.service.js","webpack:///./src/components/roles/roles-create.vue?a307","webpack:///src/components/roles/roles-create.vue","webpack:///./src/components/roles/roles-create.vue?f2a3","webpack:///./src/components/roles/roles-create.vue","webpack:///./src/mixins/helpers.js"],"names":["RolesService","data","axios","post","process","put","id","get","delete","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_v","model","value","rolData","callback","$$v","$set","expression","permisos","permisoSelected","on","$event","guardar","$router","push","name","staticRenderFns","mixins","rolesService","type","rol","finca_id","usuario_id","created","mounted","recuperarPermisos","$route","params","getFinca","getUsuario","methods","computed","component","VBtn","VCol","VRow","VSelect","VTextField","Helpers","tienePermiso","idPermiso","store","getters","getPermisosDetallados","find","item","colorAleatorio","hexadecimal","Array","color_aleatorio","i","numPosibilidades","length","aleat","Math","random","floor","posarray","parseInt","generarToken","toString","substring"],"mappings":"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","file":"js/chunk-cf171740.50f5c09e.js","sourcesContent":["import axios from \"axios\";\r\nexport default class RolesService {\r\n  getAllRoles(data) {\r\n    return axios.post(process.env.VUE_APP_API_PUBLIC + \"roles/all/\", data);\r\n  }\r\n  createRol(data) {\r\n    return axios.post(process.env.VUE_APP_API_PUBLIC + \"roles/create/\", data);\r\n  }\r\n  createRolPermiso(data) {\r\n    return axios.post(process.env.VUE_APP_API_PUBLIC + \"roles/permisos/\", data);\r\n  }\r\n  editRol(data) {\r\n    return axios.put(process.env.VUE_APP_API_PUBLIC + \"roles/\", data);\r\n  }\r\n  getRolById(id) {\r\n    return axios.get(process.env.VUE_APP_API_PUBLIC + \"roles/\" + id);\r\n  }\r\n  deleteRol(id) {\r\n    return axios.delete(process.env.VUE_APP_API_PUBLIC + \"roles/\" + id);\r\n  }\r\n  getAllPermisos() {\r\n    return axios.get(process.env.VUE_APP_API_PUBLIC + \"permisos/\");\r\n  }\r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-row',[_c('v-col',{staticClass:\"text-h5\",attrs:{\"cols\":\"12\"}},[_vm._v(\" Creación de roles \"),_c('hr')]),_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('v-row',{staticClass:\"pl-3\"},[_c('v-col',{attrs:{\"cols\":\"12\",\"sm\":\"3\"}},[_c('v-text-field',{attrs:{\"label\":\"Nombre\",\"hint\":\"Ingresa el nombre del rol\",\"persistent-hint\":\"\"},model:{value:(_vm.rolData.rol),callback:function ($$v) {_vm.$set(_vm.rolData, \"rol\", $$v)},expression:\"rolData.rol\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\",\"sm\":\"9\"}},[_c('v-select',{attrs:{\"multiple\":\"\",\"chips\":\"\",\"item-text\":\"nombre\",\"items\":_vm.permisos,\"label\":\"Permisos Asignados\",\"outlined\":\"\",\"return-object\":\"\"},model:{value:(_vm.permisoSelected),callback:function ($$v) {_vm.permisoSelected=$$v},expression:\"permisoSelected\"}})],1)],1)],1),_c('v-col',{attrs:{\"cols\":\"12\",\"sm\":\"6\",\"md\":\"3\"}},[_c('v-btn',{staticClass:\"ml-3\",attrs:{\"color\":\"primary\",\"dark\":\"\"},on:{\"click\":function($event){return _vm.guardar()}}},[_vm._v(\"Guardar\")]),_c('v-btn',{staticClass:\"ml-3\",attrs:{\"color\":\"error\",\"dark\":\"\"},on:{\"click\":function($event){return _vm.$router.push({ name: 'RolesList' })}}},[_vm._v(\"Cancelar\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <v-row>\r\n    <v-col cols=\"12\" class=\"text-h5\">\r\n      Creación de roles\r\n      <hr />\r\n    </v-col>\r\n    <v-col cols=\"12\">\r\n      <v-row class=\"pl-3\">\r\n        <v-col cols=\"12\" sm=\"3\">\r\n          <v-text-field\r\n            label=\"Nombre\"\r\n            v-model=\"rolData.rol\"\r\n            hint=\"Ingresa el nombre del rol\"\r\n            persistent-hint\r\n          ></v-text-field>\r\n        </v-col>\r\n        <v-col cols=\"12\" sm=\"9\">\r\n          <v-select\r\n            multiple\r\n            chips\r\n            item-text=\"nombre\"\r\n            :items=\"permisos\"\r\n            label=\"Permisos Asignados\"\r\n            outlined\r\n            return-object\r\n            v-model=\"permisoSelected\"\r\n          ></v-select>\r\n        </v-col>\r\n      </v-row>\r\n    </v-col>\r\n    <v-col cols=\"12\" sm=\"6\" md=\"3\">\r\n      <v-btn color=\"primary\" dark class=\"ml-3\" @click=\"guardar()\">Guardar</v-btn>\r\n      <v-btn color=\"error\" dark class=\"ml-3\" @click=\"$router.push({ name: 'RolesList' })\">Cancelar</v-btn>\r\n    </v-col>\r\n  </v-row>\r\n</template>\r\n\r\n<script>\r\nimport { mapMutations, mapGetters } from \"vuex\";\r\nimport { Helpers } from \"../../mixins/helpers\";\r\nimport RolesService from \"../../services/roles.service\";\r\nexport default {\r\n  mixins: [Helpers],\r\n  name: \"roles-create\",\r\n  data() {\r\n    return {\r\n      rolesService: null,\r\n      type: \"create\",\r\n      permisos: [],\r\n      rolData: {\r\n        id: 0,\r\n        rol: \"\",\r\n        finca_id: null,\r\n        usuario_id: null,\r\n      },\r\n      permisoSelected: [],\r\n    };\r\n  },\r\n  created() {\r\n    this.rolesService = new RolesService();\r\n  },\r\n  mounted() {\r\n    this.recuperarPermisos();\r\n    if (this.$route.params.id) {\r\n      this.type = \"edit\";\r\n      //si es edicion recuperar el potrero\r\n      this.rolesService\r\n        .getRolById(this.$route.params.id)\r\n        .then((result) => {\r\n          this.rolData.id = result.data.data.rol.id;\r\n          this.rolData.rol = result.data.data.rol.rol;\r\n          this.rolData.finca_id = result.data.data.rol.finca_id;\r\n          this.rolData.usuario_id = this.getUsuario.id;\r\n          this.permisoSelected = result.data.data.permisos;\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        });\r\n    } else {\r\n      this.rolData.finca_id = this.getFinca.id;\r\n      this.rolData.usuario_id = this.getUsuario.id;\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapMutations([]),\r\n    recuperarPermisos() {\r\n      this.rolesService\r\n        .getAllPermisos()\r\n        .then((result) => {\r\n          this.permisos = result.data.data;\r\n        })\r\n        .catch(() => {});\r\n    },\r\n    async guardar() {\r\n      if (this.permisoSelected.length == 0) {\r\n        payload = {\r\n          text: \"Debe asignarle al menos un permiso al rol\",\r\n          snackbar: true,\r\n          color: \"warning\",\r\n        };\r\n        this.$emit(\"mostrarMensaje\", payload);\r\n        return false;\r\n      }\r\n      let payload = null;\r\n      if (this.type == \"create\") {\r\n        //hacer peticion a servicio de creacion\r\n        let idRolCreado = null;\r\n        await this.rolesService\r\n          .createRol(this.rolData)\r\n          .then((result) => {\r\n            idRolCreado = result.data.id_creado;\r\n          })\r\n          .catch((err) => {\r\n            console.log(err);\r\n            return false;\r\n          });\r\n        let data = {\r\n          rol_id: idRolCreado,\r\n          permisos_ids: this.permisoSelected.map((item) => {\r\n            return item.id;\r\n          }),\r\n        };\r\n        await this.rolesService\r\n          .createRolPermiso(data)\r\n          .then((result) => {\r\n            console.log(result);\r\n            payload = {\r\n              text: \"Registro guardado exitosamente\",\r\n              snackbar: true,\r\n              color: \"success\",\r\n            };\r\n            this.$emit(\"mostrarMensaje\", payload);\r\n            setTimeout(() => {\r\n              this.$router.push({ name: \"RolesList\" });\r\n            }, 2000);\r\n          })\r\n          .catch(() => {});\r\n      } else {\r\n        //hace rpeticion al servicio de edicion\r\n        payload = {\r\n          text: \"Registro editado exitosamente\",\r\n          snackbar: true,\r\n          color: \"success\",\r\n        };\r\n        this.$emit(\"mostrarMensaje\", payload);\r\n        setTimeout(() => {\r\n          this.$router.push({ name: \"RolesList\" });\r\n        }, 2000);\r\n      }\r\n    },\r\n  },\r\n  computed: {\r\n    ...mapGetters([\"getFinca\", \"getUsuario\"]),\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped></style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./roles-create.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./roles-create.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./roles-create.vue?vue&type=template&id=c0d683c0&scoped=true&\"\nimport script from \"./roles-create.vue?vue&type=script&lang=js&\"\nexport * from \"./roles-create.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c0d683c0\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSelect } from 'vuetify/lib/components/VSelect';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VBtn,VCol,VRow,VSelect,VTextField})\n","import { store } from \"../store/store\";\r\nexport const Helpers = {\r\n  methods: {\r\n    tienePermiso(idPermiso) {\r\n      return store.getters.getPermisosDetallados.find((item) => {\r\n        return item == idPermiso;\r\n      });\r\n    },\r\n    colorAleatorio() {\r\n      var hexadecimal = new Array(\r\n        \"0\",\r\n        \"1\",\r\n        \"2\",\r\n        \"3\",\r\n        \"4\",\r\n        \"5\",\r\n        \"6\",\r\n        \"7\",\r\n        \"8\",\r\n        \"9\",\r\n        \"A\",\r\n        \"B\",\r\n        \"C\",\r\n        \"D\",\r\n        \"E\",\r\n        \"F\"\r\n      );\r\n      var color_aleatorio = \"#\";\r\n      for (let i = 0; i < 6; i++) {\r\n        var numPosibilidades = hexadecimal.length - 0;\r\n        var aleat = Math.random() * numPosibilidades;\r\n        aleat = Math.floor(aleat);\r\n        var posarray = parseInt(0) + aleat;\r\n        color_aleatorio += hexadecimal[posarray];\r\n      }\r\n      return color_aleatorio;\r\n    },\r\n    generarToken() {\r\n      return (\r\n        Math.random()\r\n          .toString(36)\r\n          .substring(2, 13) +\r\n        Math.random()\r\n          .toString(36)\r\n          .substring(2, 13)\r\n      );\r\n    },\r\n  },\r\n};\r\n"],"sourceRoot":""}